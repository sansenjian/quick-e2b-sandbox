# Quick E2B äº‘æ²™ç®±æ’ä»¶

> ä½¿ç”¨ E2B äº‘ç«¯æ²™ç®±å®‰å…¨æ‰§è¡Œ Python ä»£ç ï¼Œä¸º MaiBot æä¾›å¼ºå¤§çš„ä»£ç æ‰§è¡Œèƒ½åŠ›

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python: 3.10+](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![E2B: 1.0.0+](https://img.shields.io/badge/E2B-1.0.0+-green.svg)](https://e2b.dev)

---

## ğŸ“‹ ç›®å½•

- [åŠŸèƒ½ä»‹ç»](#åŠŸèƒ½ä»‹ç»)
- [å®‰è£…æ–¹æ³•](#å®‰è£…æ–¹æ³•)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
- [æŠ€æœ¯æ”¯æŒ](#æŠ€æœ¯æ”¯æŒ)

---

## ğŸ¯ åŠŸèƒ½ä»‹ç»

Quick E2B äº‘æ²™ç®±æ’ä»¶æ˜¯ä¸€ä¸ªåŸºäº MaiBot æ¡†æ¶çš„ Tool ç»„ä»¶ï¼Œå…è®¸ AI åŠ©æ‰‹åœ¨å®Œå…¨éš”ç¦»çš„äº‘ç«¯ç¯å¢ƒä¸­æ‰§è¡Œ Python ä»£ç ã€‚

### æ ¸å¿ƒç‰¹æ€§

#### 1. ğŸ¯ æ™ºèƒ½ä»£ç ç”Ÿæˆ
- **æ¨¡æ¿ä¼˜å…ˆ**ï¼šä½¿ç”¨é¢„ç½®çš„é«˜è´¨é‡ä»£ç æ¨¡æ¿ï¼ˆæˆåŠŸç‡ > 95%ï¼‰
- **LLM é™çº§**ï¼šæ¨¡æ¿ä¸åŒ¹é…æ—¶è‡ªåŠ¨ä½¿ç”¨ LLM ç”Ÿæˆä»£ç 
- **å¿«é€Ÿå“åº”**ï¼šæ¨¡æ¿åŒ¹é…å¹³å‡å“åº”æ—¶é—´ < 3 ç§’

#### 2. ğŸ“š ä»£ç æ¨¡æ¿åº“
- **ç½‘ç»œè¯·æ±‚æ¨¡æ¿**ï¼š
  - ç½‘é¡µæ ‡é¢˜æŠ“å–ï¼ˆæ”¯æŒå…³é”®è¯ï¼šç½‘é¡µã€æ ‡é¢˜ã€titleã€æŠ“å–ï¼‰
  - ç½‘é¡µæˆªå›¾ï¼ˆæ”¯æŒå…³é”®è¯ï¼šæˆªå›¾ã€screenshotã€ç½‘é¡µæˆªå›¾ï¼‰
  - å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œè¶…æ—¶æ§åˆ¶
- **ç»˜å›¾æ¨¡æ¿**ï¼š
  - æ­£å¼¦æ›²çº¿ç»˜åˆ¶ï¼ˆæ”¯æŒå…³é”®è¯ï¼šæ­£å¼¦ã€sinã€æ›²çº¿ï¼‰
  - è‡ªåŠ¨é…ç½®ä¸­æ–‡å­—ä½“ï¼Œé¿å…ä¹±ç 
- **æŒç»­æ‰©å±•**ï¼šæ›´å¤šæ¨¡æ¿æ­£åœ¨å¼€å‘ä¸­

#### 3. ğŸ”’ å®‰å…¨éš”ç¦»
- **äº‘ç«¯æ‰§è¡Œ**ï¼šæ‰€æœ‰ä»£ç åœ¨ E2B äº‘ç«¯æ²™ç®±ä¸­è¿è¡Œ
- **å®Œå…¨éš”ç¦»**ï¼šä¸å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿå®Œå…¨éš”ç¦»
- **è‡ªåŠ¨æ¸…ç†**ï¼šæ‰§è¡Œå®Œæˆåè‡ªåŠ¨é”€æ¯æ²™ç®±å®ä¾‹

#### 4. ğŸ¤– LLM é›†æˆ
- **Tool ç»„ä»¶**ï¼šä½œä¸º MaiBot çš„ Tool ç»„ä»¶ä¾› LLM è°ƒç”¨
- **æ™ºèƒ½å†³ç­–**ï¼šLLM è‡ªä¸»å†³å®šä½•æ—¶ä½¿ç”¨ä»£ç æ‰§è¡Œ
- **ç»“æœåé¦ˆ**ï¼šæ‰§è¡Œç»“æœè‡ªåŠ¨åé¦ˆç»™ LLM
- **çµæ´»é…ç½®**ï¼šæ”¯æŒç»Ÿä¸€æ¨¡å‹æˆ–ç‹¬ç«‹æ¨¡å‹é…ç½®
- **æ¸©åº¦æ§åˆ¶**ï¼šå¯é€‰çš„è‡ªå®šä¹‰æ¸©åº¦å‚æ•°

#### 5. ğŸ“Š ç»˜å›¾æ”¯æŒ
- **ä¸­æ–‡å­—ä½“**ï¼šè‡ªåŠ¨é…ç½® SimHei å­—ä½“ï¼Œè§£å†³ä¸­æ–‡ä¹±ç 
- **è‡ªåŠ¨å‘é€**ï¼šæ£€æµ‹ç”Ÿæˆçš„å›¾ç‰‡å¹¶è‡ªåŠ¨å‘é€ç»™ç”¨æˆ·
- **å¤šæ ¼å¼æ”¯æŒ**ï¼šæ”¯æŒ PNGã€JPEG ç­‰å¸¸è§å›¾ç‰‡æ ¼å¼

#### 6. ğŸŒ ç½‘ç»œè®¿é—®
- **è”ç½‘èƒ½åŠ›**ï¼šæ”¯æŒç½‘ç»œçˆ¬è™«å’Œ API è°ƒç”¨
- **åŠ¨æ€è£…åº“**ï¼šå¯åœ¨ä»£ç ä¸­é€šè¿‡ pip å®‰è£…ç¬¬ä¸‰æ–¹åº“
- **HTTP è¯·æ±‚**ï¼šæ”¯æŒ requestsã€aiohttp ç­‰ç½‘ç»œåº“

#### 7. âš¡ å¼‚æ­¥æ‰§è¡Œ
- **ä¸é˜»å¡**ï¼šå¼‚æ­¥æ‰§è¡Œï¼Œä¸å½±å“å…¶ä»–ç”¨æˆ·
- **å¹¶å‘æ”¯æŒ**ï¼šæ”¯æŒå¤šç”¨æˆ·åŒæ—¶ä½¿ç”¨
- **è¶…æ—¶ä¿æŠ¤**ï¼šè‡ªåŠ¨å¤„ç†è¶…æ—¶æƒ…å†µ

### æ”¯æŒçš„åŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **æ•°æ®åˆ†æ** | ä½¿ç”¨ pandasã€numpy ç­‰åº“ | æ•°æ®æ¸…æ´—ã€ç»Ÿè®¡åˆ†æ |
| **æ•°æ®å¯è§†åŒ–** | ä½¿ç”¨ matplotlibã€seaborn ç­‰ | ç»˜åˆ¶å›¾è¡¨ã€ç”ŸæˆæŠ¥å‘Š |
| **ç½‘ç»œçˆ¬è™«** | ä½¿ç”¨ requestsã€BeautifulSoup ç­‰ | æŠ“å–ç½‘é¡µæ•°æ® |
| **API è°ƒç”¨** | è°ƒç”¨ç¬¬ä¸‰æ–¹ API | å¤©æ°”æŸ¥è¯¢ã€ç¿»è¯‘æœåŠ¡ |
| **æœºå™¨å­¦ä¹ ** | ä½¿ç”¨ scikit-learn ç­‰åº“ | ç®€å•çš„æ¨¡å‹è®­ç»ƒ |
| **æ–‡ä»¶å¤„ç†** | è¯»å†™ä¸´æ—¶æ–‡ä»¶ | CSVã€JSON å¤„ç† |

---

## ğŸ“¦ å®‰è£…æ–¹æ³•

### ç‰ˆæœ¬è¯´æ˜

**å½“å‰ç‰ˆæœ¬ï¼š2.0.1**

**ç‰ˆæœ¬ 2.0.1 æ–°å¢åŠŸèƒ½**ï¼š
- âœ¨ æ¸©åº¦å‚æ•°æ§åˆ¶å¼€å…³ï¼šå¯é€‰æ‹©æ˜¯å¦ä½¿ç”¨è‡ªå®šä¹‰æ¸©åº¦å‚æ•°
- âœ¨ ç‹¬ç«‹æ¨¡å‹é…ç½®ï¼šæ”¯æŒä¸ºæ„å›¾è¯†åˆ«å’Œä»£ç ç”Ÿæˆä½¿ç”¨ä¸åŒçš„æ¨¡å‹
- ğŸ”§ ä¼˜åŒ–é…ç½®ç»“æ„ï¼šåˆ†ç¦»ç»Ÿä¸€æ¨¡å‹å’Œç‹¬ç«‹æ¨¡å‹é…ç½®
- ğŸ“ å®Œå–„æ–‡æ¡£ï¼šæ·»åŠ è¯¦ç»†çš„é…ç½®è¯´æ˜å’Œä½¿ç”¨ç¤ºä¾‹

### æ–¹å¼ 1ï¼šGit å…‹éš†ï¼ˆæ¨èï¼‰

```bash
# å…‹éš†æ’ä»¶ä»“åº“
cd MaiBot/plugins/
git clone https://github.com/sansenjian/quick-e2b-sandbox.git

# é‡å‘½åæ–‡ä»¶å¤¹ï¼ˆå¯é€‰ï¼‰
mv quick-e2b-sandbox
```

### æ–¹å¼ 2ï¼šæ‰‹åŠ¨å¤åˆ¶

å°†æœ¬æ’ä»¶ç›®å½•æ”¾å…¥ MaiBot çš„ `plugins` æ–‡ä»¶å¤¹å³å¯ã€‚

```bash
# å¤åˆ¶æ’ä»¶åˆ° MaiBot
cp -r quick-e2b-sandbox MaiBot/plugins/
```

### å®‰è£…ä¾èµ–

æ’ä»¶ä¾èµ– E2B SDKï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…ï¼š

```bash
# æ¿€æ´» MaiBot è™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœä½¿ç”¨ï¼‰
source MaiBot/.venv/bin/activate  # Linux/Mac
# æˆ–
MaiBot\.venv\Scripts\activate  # Windows

# å®‰è£… E2B SDK
pip install e2b-code-interpreter>=1.0.0
```

### è·å– E2B API Key

1. è®¿é—® [E2B å®˜ç½‘](https://e2b.dev) æ³¨å†Œè´¦å·
2. è¿›å…¥ Dashboardï¼Œç‚¹å‡» "API Keys"
3. åˆ›å»º API Keyï¼Œå¤åˆ¶å¯†é’¥ï¼ˆæ ¼å¼ï¼š`e2b_xxx...`ï¼‰
4. ç¼–è¾‘ `config.toml`ï¼Œå¡«å…¥ API Key

```toml
[e2b]
api_key = "e2b_your_api_key_here"
```

#### ä½¿ç”¨ä»£ç†ï¼ˆå¦‚æœæœåŠ¡å™¨åœ¨å›½å†…ï¼‰

éœ€è¦é€šè¿‡ä»£ç†è®¿é—® E2B APIï¼š

```toml
[e2b]
api_base_url = "https://your-proxy.com/api"
```

### å¯ç”¨æ’ä»¶

é‡å¯ MaiBotï¼Œæ’ä»¶ä¼šè‡ªåŠ¨åŠ è½½å¹¶ç”Ÿæˆ `config.toml` é…ç½®æ–‡ä»¶ã€‚

```bash
# é‡å¯ MaiBot
cd MaiBot
python main.py
```

---

## âš™ï¸ é…ç½®è¯´æ˜

æ’ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆ `config.toml`ï¼Œæ‰€æœ‰é…ç½®é¡¹éƒ½å¯è‡ªå®šä¹‰ã€‚

### åŸºæœ¬é…ç½® (plugin)

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `enabled` | bool | true | æ˜¯å¦å¯ç”¨æ’ä»¶ |
| `config_version` | string | 2.0.1 | é…ç½®æ–‡ä»¶ç‰ˆæœ¬å· |

### ç»Ÿä¸€æ¨¡å‹é…ç½® (unified_model)

å½“ `separate_models.use_separate_models = false` æ—¶ä½¿ç”¨æ­¤é…ç½®ã€‚

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `model_name` | string | "replyer" | ç»Ÿä¸€ä½¿ç”¨çš„æ¨¡å‹åç§° |

### ç‹¬ç«‹æ¨¡å‹é…ç½® (separate_models)

æ”¯æŒä¸ºæ„å›¾è¯†åˆ«å’Œä»£ç ç”Ÿæˆä½¿ç”¨ä¸åŒçš„æ¨¡å‹ã€‚

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `use_separate_models` | bool | false | æ˜¯å¦ä¸ºæ„å›¾è¯†åˆ«å’Œä»£ç ç”Ÿæˆä½¿ç”¨ä¸åŒæ¨¡å‹ |
| `intent_model_name` | string | "replyer" | æ„å›¾è¯†åˆ«ä½¿ç”¨çš„æ¨¡å‹åç§° |
| `generation_model_name` | string | "replyer" | ä»£ç ç”Ÿæˆä½¿ç”¨çš„æ¨¡å‹åç§° |

### æ¨¡å‹å‚æ•°é…ç½® (model_config)

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `use_custom_temperature` | bool | true | æ˜¯å¦ä½¿ç”¨è‡ªå®šä¹‰æ¸©åº¦å‚æ•° |
| `intent_temperature` | float | 1.0 | æ„å›¾è¯†åˆ«æ¸©åº¦ï¼ˆ0-1ï¼‰ï¼Œä»…åœ¨å¯ç”¨è‡ªå®šä¹‰æ¸©åº¦æ—¶ç”Ÿæ•ˆ |
| `generation_temperature` | float | 0.5 | ä»£ç ç”Ÿæˆæ¸©åº¦ï¼ˆ0-1ï¼‰ï¼Œä»…åœ¨å¯ç”¨è‡ªå®šä¹‰æ¸©åº¦æ—¶ç”Ÿæ•ˆ |

### E2B äº‘æ²™ç®±é…ç½® (e2b)

#### API é…ç½®
| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `api_key` | string | "" | E2B API å¯†é’¥ï¼ˆ**å¿…éœ€**ï¼‰ |
| `api_base_url` | string | "" | API ä»£ç†åœ°å€ï¼ˆå¯é€‰ï¼‰ |

#### æ‰§è¡Œé…ç½®
| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `timeout` | int | 180 | ä»£ç æ‰§è¡Œè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼Œ10~300ï¼‰<br>**æ³¨æ„**ï¼šæˆªå›¾åŠŸèƒ½é¦–æ¬¡ä½¿ç”¨æ—¶éœ€è¦å®‰è£… Playwrightï¼ˆ40-60 ç§’ï¼‰+ æˆªå›¾æ‰§è¡Œï¼ˆ10-20 ç§’ï¼‰ï¼Œå»ºè®®ä¿æŒ 180 ç§’ |
| `max_retries` | int | 2 | ç½‘ç»œè¿æ¥å¤±è´¥æ—¶çš„æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆ0~5ï¼‰ |
| `max_output_length` | int | 2000 | æœ€å¤§è¾“å‡ºé•¿åº¦ï¼ˆå­—ç¬¦ï¼Œ500~10000ï¼‰ |
| `max_stdout_length` | int | 500 | æ ‡å‡†è¾“å‡ºæœ€å¤§é•¿åº¦ï¼ˆå­—ç¬¦ï¼Œ100~2000ï¼‰ |

#### è°ƒè¯•é…ç½®
| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `debug_mode` | bool | false | è°ƒè¯•æ¨¡å¼ï¼šè¾“å‡ºæ‰€æœ‰åŸå§‹ä¿¡æ¯ |

### ğŸ“‹ é…ç½®ç¤ºä¾‹

```toml
[plugin]
enabled = true
config_version = "2.0.1"

[unified_model]
# ç»Ÿä¸€æ¨¡å‹é…ç½®ï¼ˆå½“ use_separate_models = false æ—¶ä½¿ç”¨ï¼‰
model_name = "replyer"

[separate_models]
# ç‹¬ç«‹æ¨¡å‹é…ç½®
use_separate_models = false  # æ˜¯å¦ä¸ºæ„å›¾è¯†åˆ«å’Œä»£ç ç”Ÿæˆä½¿ç”¨ä¸åŒæ¨¡å‹
intent_model_name = "replyer"  # æ„å›¾è¯†åˆ«æ¨¡å‹
generation_model_name = "replyer"  # ä»£ç ç”Ÿæˆæ¨¡å‹

[model_config]
# æ¨¡å‹å‚æ•°é…ç½®
use_custom_temperature = true  # æ˜¯å¦ä½¿ç”¨è‡ªå®šä¹‰æ¸©åº¦
intent_temperature = 1.0  # æ„å›¾è¯†åˆ«æ¸©åº¦ï¼ˆ0-1ï¼‰
generation_temperature = 0.5  # ä»£ç ç”Ÿæˆæ¸©åº¦ï¼ˆ0-1ï¼‰

[e2b]
# API é…ç½®
api_key = "e2b_your_api_key_here"
api_base_url = ""

# æ‰§è¡Œé…ç½®
# æ³¨æ„ï¼šå®‰è£… Playwright éœ€è¦ 40-60 ç§’ï¼Œæˆªå›¾éœ€è¦é¢å¤– 10-20 ç§’
timeout = 180
max_retries = 2
max_output_length = 2000
max_stdout_length = 500

# è°ƒè¯•é…ç½®
debug_mode = false
```


#### è°ƒæ•´è¶…æ—¶æ—¶é—´

å¯¹äºå¤æ‚è®¡ç®—æˆ–é¦–æ¬¡ä½¿ç”¨æˆªå›¾åŠŸèƒ½ï¼Œå»ºè®®ä½¿ç”¨é»˜è®¤çš„ 180 ç§’è¶…æ—¶ï¼š

```toml
[e2b]
# é»˜è®¤é…ç½®ï¼ˆæ¨èï¼‰
timeout = 180  # 3 åˆ†é’Ÿï¼Œè¶³å¤Ÿå¤„ç† Playwright å®‰è£… + æˆªå›¾æ‰§è¡Œ

# å¦‚æœåªæ‰§è¡Œç®€å•ä»£ç ï¼Œå¯ä»¥é€‚å½“å‡å°‘
timeout = 60   # 1 åˆ†é’Ÿï¼Œé€‚åˆç®€å•è®¡ç®—
```

**é‡è¦æç¤º**ï¼š
- æˆªå›¾åŠŸèƒ½é¦–æ¬¡ä½¿ç”¨æ—¶éœ€è¦è‡ªåŠ¨å®‰è£… Playwright å’Œ Chromium æµè§ˆå™¨ï¼ˆ40-60 ç§’ï¼‰
- æˆªå›¾æ‰§è¡Œæœ¬èº«éœ€è¦ 10-20 ç§’
- å¦‚æœè¶…æ—¶æ—¶é—´è¿‡çŸ­ï¼Œå¯èƒ½å¯¼è‡´æˆªå›¾åŠŸèƒ½å¤±è´¥

#### å¼€å¯è°ƒè¯•æ¨¡å¼

æŸ¥çœ‹å®Œæ•´çš„æ‰§è¡Œä¿¡æ¯ï¼ˆåŒ…æ‹¬è¢«è¿‡æ»¤çš„å†…å®¹ï¼‰ï¼š

```toml
[e2b]
debug_mode = true
```

#### é…ç½®ç‹¬ç«‹æ¨¡å‹

å¦‚æœéœ€è¦ä¸ºæ„å›¾è¯†åˆ«å’Œä»£ç ç”Ÿæˆä½¿ç”¨ä¸åŒçš„æ¨¡å‹ï¼š

```toml
[separate_models]
use_separate_models = true  # å¯ç”¨ç‹¬ç«‹æ¨¡å‹
intent_model_name = "gpt-4"  # æ„å›¾è¯†åˆ«ä½¿ç”¨ GPT-4
generation_model_name = "claude-3"  # ä»£ç ç”Ÿæˆä½¿ç”¨ Claude-3
```

#### é…ç½®æ¸©åº¦å‚æ•°

æ§åˆ¶æ¨¡å‹çš„åˆ›é€ æ€§å’Œç¡®å®šæ€§ï¼š

```toml
[model_config]
use_custom_temperature = true  # å¯ç”¨è‡ªå®šä¹‰æ¸©åº¦
intent_temperature = 1.0  # æ„å›¾è¯†åˆ«ï¼šè¾ƒé«˜æ¸©åº¦ï¼Œæ›´çµæ´»
generation_temperature = 0.5  # ä»£ç ç”Ÿæˆï¼šè¾ƒä½æ¸©åº¦ï¼Œæ›´å‡†ç¡®
```

å¦‚æœä¸æƒ³ä¼ é€’æ¸©åº¦å‚æ•°ï¼ˆä½¿ç”¨æ¨¡å‹é»˜è®¤å€¼ï¼‰ï¼š

```toml
[model_config]
use_custom_temperature = false  # ä½¿ç”¨æ¨¡å‹é»˜è®¤æ¸©åº¦
```

---

## ğŸ” å·¥ä½œåŸç†

### æ™ºèƒ½ä»£ç ç”Ÿæˆæµç¨‹

1. **æ¥æ”¶è¯·æ±‚** - LLM å†³å®šè°ƒç”¨ `quick_python_exec` Tool
2. **æ¨¡æ¿åŒ¹é…** - æ ¹æ®å…³é”®è¯åŒ¹é…é¢„ç½®çš„ä»£ç æ¨¡æ¿
3. **ä»£ç ç”Ÿæˆ** - ä½¿ç”¨æ¨¡æ¿æˆ– LLM ç”Ÿæˆä»£ç 
4. **å¯åŠ¨æ²™ç®±** - åœ¨ E2B äº‘ç«¯åˆ›å»ºéš”ç¦»çš„ Python ç¯å¢ƒ
5. **ä¾èµ–æ£€æµ‹** - è‡ªåŠ¨æ£€æµ‹å¹¶å®‰è£…æ‰€éœ€çš„ç¬¬ä¸‰æ–¹åº“
6. **ä»£ç æ‰§è¡Œ** - åœ¨æ²™ç®±ä¸­æ‰§è¡Œ Python ä»£ç 
7. **ç»“æœå¤„ç†** - æ”¶é›†æ ‡å‡†è¾“å‡ºã€é”™è¯¯è¾“å‡ºå’Œç”Ÿæˆçš„æ–‡ä»¶
8. **å›¾ç‰‡å‘é€** - è‡ªåŠ¨æ£€æµ‹å¹¶å‘é€ç”Ÿæˆçš„å›¾ç‰‡
9. **æ¸…ç†æ²™ç®±** - æ‰§è¡Œå®Œæˆåè‡ªåŠ¨é”€æ¯æ²™ç®±å®ä¾‹

### æ¨¡æ¿ä¼˜å…ˆç­–ç•¥

æ’ä»¶é‡‡ç”¨"æ¨¡æ¿ä¼˜å…ˆï¼ŒLLM é™çº§"çš„ç­–ç•¥ï¼š

**æ¨¡æ¿åŒ¹é…ï¼ˆä¼˜å…ˆï¼‰**ï¼š
- æ ¹æ®ç”¨æˆ·è¯·æ±‚ä¸­çš„å…³é”®è¯åŒ¹é…é¢„ç½®æ¨¡æ¿
- æˆåŠŸç‡ > 95%
- å“åº”æ—¶é—´ < 3 ç§’
- ä»£ç è´¨é‡ç¨³å®š

**LLM ç”Ÿæˆï¼ˆé™çº§ï¼‰**ï¼š
- æ¨¡æ¿ä¸åŒ¹é…æ—¶è‡ªåŠ¨ä½¿ç”¨ LLM ç”Ÿæˆä»£ç 
- æˆåŠŸç‡ 70-80%
- å“åº”æ—¶é—´ 5-8 ç§’
- çµæ´»åº”å¯¹å„ç§éœ€æ±‚

### å¯ç”¨çš„ä»£ç æ¨¡æ¿

#### ç½‘ç»œè¯·æ±‚æ¨¡æ¿

**WEB_SCRAPE_TITLE** - æŠ“å–ç½‘é¡µæ ‡é¢˜
- **è§¦å‘å…³é”®è¯**ï¼šç½‘é¡µã€æ ‡é¢˜ã€titleã€æŠ“å–ã€çˆ¬å–
- **åŠŸèƒ½**ï¼šä½¿ç”¨ requests + BeautifulSoup æŠ“å–ç½‘é¡µæ ‡é¢˜
- **ç‰¹ç‚¹**ï¼š
  - å®Œæ•´çš„é”™è¯¯å¤„ç†ï¼ˆè¶…æ—¶ã€è¿æ¥é”™è¯¯ã€HTTP é”™è¯¯ï¼‰
  - è‡ªåŠ¨è®¾ç½® User-Agent
  - 10 ç§’è¶…æ—¶ä¿æŠ¤
- **ç¤ºä¾‹**ï¼š
  - "å¸®æˆ‘æŠ“å– https://www.python.org çš„æ ‡é¢˜"
  - "è·å–è¿™ä¸ªç½‘é¡µçš„æ ‡é¢˜ï¼šhttps://example.com"

**WEB_SCREENSHOT** - ç½‘é¡µæˆªå›¾
- **è§¦å‘å…³é”®è¯**ï¼šæˆªå›¾ã€screenshotã€ç½‘é¡µæˆªå›¾
- **åŠŸèƒ½**ï¼šä½¿ç”¨ Playwright + Chromium å¯¹ç½‘é¡µè¿›è¡Œæˆªå›¾
- **ç‰¹ç‚¹**ï¼š
  - æ”¯æŒå®Œæ•´é¡µé¢æˆªå›¾
  - æ— å¤´æ¨¡å¼è¿è¡Œï¼ˆheadlessï¼‰
  - è‡ªåŠ¨å¤„ç†é¡µé¢åŠ è½½
  - é«˜è´¨é‡ PNG è¾“å‡º
  - **è‡ªåŠ¨å®‰è£…ä¾èµ–**ï¼šé¦–æ¬¡ä½¿ç”¨æ—¶è‡ªåŠ¨å®‰è£… Playwright å’Œ Chromium æµè§ˆå™¨ï¼ˆéœ€è¦ 30-60 ç§’ï¼‰
  - **è¯¦ç»†ç¯å¢ƒæ£€æŸ¥**ï¼šè‡ªåŠ¨æ£€æµ‹ Python ç¯å¢ƒã€ä¾èµ–åŒ…ã€æµè§ˆå™¨çŠ¶æ€
  - **è¯Šæ–­ä¿¡æ¯**ï¼šæä¾›å®Œæ•´çš„æ£€æŸ¥ç‚¹è¾“å‡ºï¼Œä¾¿äºæ’æŸ¥é—®é¢˜
- **ç¤ºä¾‹**ï¼š
  - "å¸®æˆ‘æˆªå›¾è¿™ä¸ªç½‘é¡µï¼šhttps://www.python.org"
  - "å¯¹ https://example.com è¿›è¡Œæˆªå›¾"
- **æ³¨æ„**ï¼šé¦–æ¬¡ä½¿ç”¨æ—¶ä¼šè‡ªåŠ¨å®‰è£…ä¾èµ–ï¼Œå¯èƒ½éœ€è¦ç­‰å¾… 30-60 ç§’

#### ç»˜å›¾æ¨¡æ¿

**PLOT_SINE_WAVE** - ç»˜åˆ¶æ­£å¼¦æ›²çº¿
- **è§¦å‘å…³é”®è¯**ï¼šæ­£å¼¦ã€ä½™å¼¦ã€sinã€cosã€ä¸‰è§’å‡½æ•°
- **åŠŸèƒ½**ï¼šä½¿ç”¨ numpy + matplotlib ç»˜åˆ¶æ­£å¼¦/ä½™å¼¦æ›²çº¿
- **ç‰¹ç‚¹**ï¼š
  - è‡ªåŠ¨é…ç½®ä¸­æ–‡å­—ä½“ï¼ˆSimHeiï¼‰
  - ç¾è§‚çš„å›¾è¡¨æ ·å¼ï¼ˆç½‘æ ¼ã€å›¾ä¾‹ã€æ ‡ç­¾ï¼‰
  - è‡ªåŠ¨ä¿å­˜ä¸º PNG æ ¼å¼
- **ç¤ºä¾‹**ï¼š
  - "å¸®æˆ‘ç”»ä¸ªæ­£å¼¦æ›²çº¿"
  - "ç»˜åˆ¶ sin(x) å‡½æ•°å›¾åƒ"

### ä»£ç æ‰§è¡Œæµç¨‹

1. **æ¥æ”¶è¯·æ±‚** - LLM å†³å®šè°ƒç”¨ `quick_python_exec` Tool
2. **å¯åŠ¨æ²™ç®±** - åœ¨ E2B äº‘ç«¯åˆ›å»ºéš”ç¦»çš„ Python ç¯å¢ƒ
3. **ä¾èµ–æ£€æµ‹** - è‡ªåŠ¨æ£€æµ‹å¹¶å®‰è£…æ‰€éœ€çš„ç¬¬ä¸‰æ–¹åº“
4. **ä»£ç æ‰§è¡Œ** - åœ¨æ²™ç®±ä¸­æ‰§è¡Œ Python ä»£ç 
5. **ç»“æœå¤„ç†** - æ”¶é›†æ ‡å‡†è¾“å‡ºã€é”™è¯¯è¾“å‡ºå’Œç”Ÿæˆçš„æ–‡ä»¶
6. **å›¾ç‰‡å‘é€** - è‡ªåŠ¨æ£€æµ‹å¹¶å‘é€ç”Ÿæˆçš„å›¾ç‰‡
7. **æ¸…ç†æ²™ç®±** - æ‰§è¡Œå®Œæˆåè‡ªåŠ¨é”€æ¯æ²™ç®±å®ä¾‹

### å®‰å…¨æœºåˆ¶

- **å®Œå…¨éš”ç¦»** - ä»£ç åœ¨äº‘ç«¯æ²™ç®±ä¸­è¿è¡Œï¼Œä¸å®¿ä¸»æœºå®Œå…¨éš”ç¦»
- **è¶…æ—¶ä¿æŠ¤** - è‡ªåŠ¨ç»ˆæ­¢è¶…æ—¶çš„ä»£ç æ‰§è¡Œ
- **èµ„æºé™åˆ¶** - æ²™ç®±ç¯å¢ƒæœ‰ CPUã€å†…å­˜ç­‰èµ„æºé™åˆ¶
- **è‡ªåŠ¨æ¸…ç†** - æ‰§è¡Œå®Œæˆåè‡ªåŠ¨é”€æ¯ï¼Œä¸ç•™ç—•è¿¹

### ç‰¹æ®Šå¤„ç†

- **ä¸­æ–‡å­—ä½“** - è‡ªåŠ¨é…ç½® SimHei å­—ä½“ï¼Œè§£å†³ç»˜å›¾ä¸­æ–‡ä¹±ç 
- **curl è¿‡æ»¤** - è¿‡æ»¤ curl ä¸‹è½½è¿›åº¦ä¿¡æ¯ï¼Œé¿å…æ±¡æŸ“è¾“å‡º
- **è¾“å‡ºæˆªæ–­** - è‡ªåŠ¨æˆªæ–­è¿‡é•¿è¾“å‡ºï¼Œé¿å…è§¦å‘æ¶ˆæ¯åˆ†å‰²é™åˆ¶
- **Markdown æ¸…ç†** - æ¸…ç†ä»£ç å—æ ‡è®°ï¼Œæå–çº¯ Python ä»£ç 

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•è·å– E2B API Keyï¼Ÿ
A: è®¿é—® https://e2b.dev æ³¨å†Œè´¦å·ï¼Œåœ¨ Dashboard ä¸­åˆ›å»º API Keyã€‚è¯¦è§[é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)ã€‚

### Q: æ’ä»¶æç¤º "E2B API Key is missing"ï¼Ÿ
A: æ£€æŸ¥ `config.toml` ä¸­çš„ `e2b.api_key` æ˜¯å¦æ­£ç¡®é…ç½®ã€‚

### Q: ä»£ç æ‰§è¡Œè¶…æ—¶æ€ä¹ˆåŠï¼Ÿ
A: 
1. **æ£€æŸ¥è¶…æ—¶é…ç½®**ï¼šé»˜è®¤ 180 ç§’åº”è¯¥è¶³å¤Ÿå¤§å¤šæ•°åœºæ™¯
2. **æˆªå›¾åŠŸèƒ½**ï¼šé¦–æ¬¡ä½¿ç”¨æ—¶ä¼šè‡ªåŠ¨å®‰è£… Playwrightï¼ˆ40-60 ç§’ï¼‰+ æˆªå›¾æ‰§è¡Œï¼ˆ10-20 ç§’ï¼‰ï¼Œéœ€è¦è¾ƒé•¿è¶…æ—¶æ—¶é—´
3. **ä»£ç ä¼˜åŒ–**ï¼šæ£€æŸ¥ä»£ç æ˜¯å¦æœ‰æ­»å¾ªç¯æˆ–è€—æ—¶æ“ä½œ
4. **å¢åŠ è¶…æ—¶**ï¼šå¦‚éœ€æ›´é•¿æ—¶é—´ï¼Œå¯åœ¨ `config.toml` ä¸­å¢åŠ  `timeout`ï¼ˆæœ€å¤§ 300 ç§’ï¼‰
5. **ç®€åŒ–é€»è¾‘**ï¼šå°†å¤æ‚ä»»åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªç®€å•æ­¥éª¤

**è¶…æ—¶æ—¶é—´å»ºè®®**ï¼š
- ç®€å•è®¡ç®—ï¼š60 ç§’
- ç½‘ç»œè¯·æ±‚ï¼š90 ç§’
- ç»˜å›¾åŠŸèƒ½ï¼š120 ç§’
- æˆªå›¾åŠŸèƒ½ï¼š180 ç§’ï¼ˆæ¨èé»˜è®¤å€¼ï¼‰
- å¤æ‚ä»»åŠ¡ï¼š240-300 ç§’

### Q: ç»˜å›¾æ—¶ä¸­æ–‡æ˜¾ç¤ºä¹±ç ï¼Ÿ
A: æ’ä»¶å·²è‡ªåŠ¨é…ç½® SimHei å­—ä½“ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œç¡®ä¿ä½¿ç”¨ `plt.savefig()` è€Œä¸æ˜¯ `plt.show()`ã€‚

### Q: å¦‚ä½•å®‰è£…ç¬¬ä¸‰æ–¹åº“ï¼Ÿ
A: æ’ä»¶ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶å®‰è£…ä¾èµ–ã€‚ä¹Ÿå¯ä»¥åœ¨ä»£ç ä¸­æ‰‹åŠ¨å®‰è£…ï¼š
```python
import subprocess
subprocess.run(['pip', 'install', 'package-name'], capture_output=True)
```

### Q: èƒ½å¦ä¿å­˜æ–‡ä»¶ä¾›ä¸‹æ¬¡ä½¿ç”¨ï¼Ÿ
A: ä¸èƒ½ã€‚æ¯æ¬¡æ‰§è¡Œéƒ½æ˜¯å…¨æ–°çš„ç¯å¢ƒï¼Œæ–‡ä»¶ä¸ä¼šä¿ç•™ã€‚å¦‚éœ€æŒä¹…åŒ–æ•°æ®ï¼Œè¯·ä½¿ç”¨å¤–éƒ¨å­˜å‚¨ã€‚

### Q: å¦‚ä½•å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Ÿ
A: åœ¨ `config.toml` ä¸­è®¾ç½® `debug_mode = true`ï¼Œå¯ä»¥çœ‹åˆ°å®Œæ•´çš„æ‰§è¡Œä¿¡æ¯ã€‚

### Q: æ”¯æŒå“ªäº› Python ç‰ˆæœ¬ï¼Ÿ
A: E2B æ²™ç®±ä½¿ç”¨ Python 3.10+ï¼Œæ”¯æŒå¤§éƒ¨åˆ†å¸¸ç”¨åº“ã€‚

### Q: å¦‚ä½•é™åˆ¶ä½¿ç”¨ï¼Ÿ
A: 
1. è°ƒæ•´ `timeout` é™åˆ¶æ‰§è¡Œæ—¶é—´
2. è°ƒæ•´ `max_output_length` é™åˆ¶è¾“å‡ºé•¿åº¦
3. ç›‘æ§ E2B API ä½¿ç”¨é‡

### Q: èƒ½å¦ä½¿ç”¨ä»£ç†è®¿é—® E2B APIï¼Ÿ
A: å¯ä»¥ã€‚åœ¨ `config.toml` ä¸­è®¾ç½® `api_base_url` ä¸ºä»£ç†åœ°å€ã€‚

## ğŸ“Š æ—¥å¿—ç¤ºä¾‹

```
[e2b_sandbox] [E2BSandboxTool] å¯åŠ¨æ²™ç®±æ‰§è¡Œ | Session: xxx | è¶…æ—¶: 60s
[e2b_sandbox] [E2BSandboxTool] æ­£åœ¨è‡ªåŠ¨å®‰è£…ä¾èµ–: ['matplotlib', 'numpy']
[e2b_sandbox] [E2BSandboxTool] ä»£ç æ‰§è¡Œå®Œæˆ | Session: xxx
[e2b_sandbox] [E2BSandboxTool] æ£€æµ‹åˆ°å›¾ç‰‡: sine_wave.png (45678 å­—èŠ‚)
[e2b_sandbox] [E2BSandboxTool] å›¾ç‰‡å‘é€æˆåŠŸ
```

## ğŸ® ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: æ•°æ®åˆ†æ
- ç”¨æˆ·æä¾›æ•°æ®
- AI ç”Ÿæˆåˆ†æä»£ç 
- æ‰§è¡Œå¹¶è¿”å›ç»Ÿè®¡ç»“æœ

### åœºæ™¯ 2: æ•°æ®å¯è§†åŒ–
- ç”¨æˆ·è¦æ±‚ç»˜åˆ¶å›¾è¡¨
- AI ç”Ÿæˆç»˜å›¾ä»£ç 
- è‡ªåŠ¨å‘é€ç”Ÿæˆçš„å›¾ç‰‡

### åœºæ™¯ 3: ç½‘ç»œçˆ¬è™«
- ç”¨æˆ·è¦æ±‚æŸ¥è¯¢ä¿¡æ¯
- AI ç”Ÿæˆçˆ¬è™«ä»£ç 
- æ‰§è¡Œå¹¶è¿”å›ç»“æœ

### åœºæ™¯ 4: æµè§ˆå™¨è‡ªåŠ¨åŒ–
- ç”¨æˆ·è¦æ±‚è®¿é—®ç½‘é¡µ
- AI ä½¿ç”¨ Selenium ç”Ÿæˆä»£ç 
- æ‰§è¡Œå¹¶è¿”å›é¡µé¢ä¿¡æ¯æˆ–æˆªå›¾

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- ä»£ç è¦†ç›–ç‡ï¼š85%+
- æµ‹è¯•é€šè¿‡ç‡ï¼š100%
- è´¨é‡è¯„åˆ†ï¼š5/5
- å¹³å‡å“åº”æ—¶é—´ï¼š3~15 ç§’ï¼ˆå–å†³äºä»£ç å¤æ‚åº¦ï¼‰

---

## ğŸ”§ æŠ€æœ¯æ”¯æŒ

### æ–‡æ¡£å’Œèµ„æº

- **E2B å®˜æ–¹æ–‡æ¡£**ï¼šhttps://e2b.dev/docs
- **MaiBot æ–‡æ¡£**ï¼šhttps://docs.maibot.cn
- **æ’ä»¶ä»“åº“**ï¼šhttps://github.com/sansenjian/quick-e2b-sandbox
- **æ’ä»¶æºç **ï¼š`MaiBot/plugins/quick-e2b-sandbox/plugin.py`

### é—®é¢˜åé¦ˆ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ï¼š

1. é”™è¯¯ä¿¡æ¯ï¼ˆå®Œæ•´çš„é”™è¯¯æç¤ºï¼‰
2. é…ç½®æ–‡ä»¶ï¼ˆ`config.toml` å†…å®¹ï¼Œéšè— API Keyï¼‰
3. æ—¥å¿—æ–‡ä»¶ï¼ˆ`MaiBot/logs/` ä¸­çš„ç›¸å…³æ—¥å¿—ï¼‰
4. å¤ç°æ­¥éª¤ï¼ˆå¦‚ä½•è§¦å‘é—®é¢˜ï¼‰

---

## ğŸ§ª æµ‹è¯•

æ’ä»¶åŒ…å«å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œ E2B å®é™…æµ‹è¯•ã€‚

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰ pytest æµ‹è¯•
pytest tests/

# è¿è¡Œç‹¬ç«‹æµ‹è¯•è„šæœ¬
python tests/test_simple_output.py        # æµ‹è¯•åŸºæœ¬è¾“å‡ºæ•è·
python tests/test_web_template_e2b.py     # æµ‹è¯•ç½‘é¡µæ¨¡æ¿
python tests/test_screenshot_template_e2b.py  # æµ‹è¯•æˆªå›¾æ¨¡æ¿
python tests/show_templates.py            # æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æ¨¡æ¿
```

### æµ‹è¯•è¯´æ˜

- **test_simple_output.py**ï¼šæµ‹è¯• E2B æ²™ç®±çš„åŸºæœ¬ print() è¾“å‡ºæ•è·ï¼ŒåŒ…æ‹¬ç®€å•è¾“å‡ºã€å˜é‡è¾“å‡ºå’Œ subprocess è¾“å‡º
- **test_web_template_e2b.py**ï¼šæµ‹è¯•ç½‘é¡µæ ‡é¢˜æŠ“å–æ¨¡æ¿çš„å®é™…æ‰§è¡Œ
- **test_screenshot_template_e2b.py**ï¼šæµ‹è¯•ç½‘é¡µæˆªå›¾æ¨¡æ¿çš„å®é™…æ‰§è¡Œï¼ˆé¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨å®‰è£… Playwrightï¼‰
- **show_templates.py**ï¼šå±•ç¤ºæ‰€æœ‰å¯ç”¨çš„ä»£ç æ¨¡æ¿åŠå…¶è§¦å‘å…³é”®è¯

è¯¦ç»†çš„æµ‹è¯•æ–‡æ¡£è¯·å‚è€ƒ `tests/README.md`ã€‚

### æ€§èƒ½æŒ‡æ ‡

- ä»£ç è¦†ç›–ç‡ï¼š85%+
- æµ‹è¯•é€šè¿‡ç‡ï¼š100%
- è´¨é‡è¯„åˆ†ï¼š5/5
- å¹³å‡å“åº”æ—¶é—´ï¼š3~15 ç§’ï¼ˆå–å†³äºä»£ç å¤æ‚åº¦ï¼‰

---

## ğŸ“„ è®¸å¯è¯

æœ¬æ’ä»¶åŸºäº MIT è®¸å¯è¯å¼€æºã€‚

---

## ğŸ™ è‡´è°¢

- **E2B**ï¼šæä¾›å¼ºå¤§çš„äº‘æ²™ç®±æœåŠ¡
- **MaiBot**ï¼šä¼˜ç§€çš„èŠå¤©æœºå™¨äººæ¡†æ¶
- **ç¤¾åŒºè´¡çŒ®è€…**ï¼šæ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„æ”¯æŒ

---

## ğŸ“ å¼€å‘ä¿¡æ¯

**æœ€åæ›´æ–°**ï¼š2025-02-07

**ç‰ˆæœ¬**ï¼š2.0.1

**ä½œè€…**ï¼šsansenjian

**ç»´æŠ¤è€…**ï¼šKiro AI Assistant
